\usepackage{calc}
\usepackage{fancyhdr}

\setlength{\headheight}{15.0pt}
\addtolength{\topmargin}{-3.0pt}

\newcommand{\xcsoarheader}[1]{
  \pagestyle{fancy}

  % Add XCSoar User Manual title to the header
  \fancyhead[L]{\hspace*{-\marginparsep}\hspace*{-\marginparwidth}\em#1}

  % Add page number to the footer (centered)
  \fancyfoot{}
  \fancyfoot[R]{\thepage}
}

% No line between content and header
\renewcommand{\headrulewidth}{0pt}

\fancypagestyle{plain}{
  % Clear fancy header and footer
  \fancyhf{}

  % Add page number to the footer (centered)
  \fancyfoot[R]{\thepage}

  % No line between content and header
  \renewcommand{\headrulewidth}{0pt}
}
